<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JS," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="本文主要记录工作时JS问题或经验  new Array()的遍历问题new Array(3)这样得出的稀疏数组不能够进行遍历，需要进行特殊的转义才能够遍历 webkitTransitionEnd监听Transition动画结束事件css3的过渡属性transition，在动画结束时，也存在结束的事件：webkitTransitionEnd; 注意：transition,也仅仅有这一个事件。 1$">
<meta property="og:type" content="article">
<meta property="og:title" content="JS工作经验总结（2）">
<meta property="og:url" content="https://sellenite.github.io/2018/10/29/JS%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93%EF%BC%882%EF%BC%89/index.html">
<meta property="og:site_name" content="yuuhei&#39;s Home">
<meta property="og:description" content="本文主要记录工作时JS问题或经验  new Array()的遍历问题new Array(3)这样得出的稀疏数组不能够进行遍历，需要进行特殊的转义才能够遍历 webkitTransitionEnd监听Transition动画结束事件css3的过渡属性transition，在动画结束时，也存在结束的事件：webkitTransitionEnd; 注意：transition,也仅仅有这一个事件。 1$">
<meta property="og:locale">
<meta property="article:published_time" content="2018-10-29T02:21:20.000Z">
<meta property="article:modified_time" content="2023-09-12T10:53:32.108Z">
<meta property="article:author" content="Sellenite">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://sellenite.github.io/2018/10/29/JS工作经验总结（2）/"/>





  <title> JS工作经验总结（2） | yuuhei's Home </title>
<meta name="generator" content="Hexo 6.3.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yuuhei's Home</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://sellenite.github.io/2018/10/29/JS%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93%EF%BC%882%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://puu.sh/uoJbK/033c9ae781.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yuuhei's Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                JS工作经验总结（2）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-29T10:21:20+08:00">
                2018-10-29
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2018/10/29/JS%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93%EF%BC%882%EF%BC%89/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>本文主要记录工作时JS问题或经验</p>
</blockquote>
<h4 id="new-Array-的遍历问题"><a href="#new-Array-的遍历问题" class="headerlink" title="new Array()的遍历问题"></a>new Array()的遍历问题</h4><p>new Array(3)这样得出的稀疏数组不能够进行遍历，需要进行特殊的转义才能够遍历</p>
<h4 id="webkitTransitionEnd监听Transition动画结束事件"><a href="#webkitTransitionEnd监听Transition动画结束事件" class="headerlink" title="webkitTransitionEnd监听Transition动画结束事件"></a>webkitTransitionEnd监听Transition动画结束事件</h4><p>css3的过渡属性transition，在动画结束时，也存在结束的事件：webkitTransitionEnd; 注意：transition,也仅仅有这一个事件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;webkitTransitionEnd&#x27;</span>, handler, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>css3的动画animation也能够监听事件，分别在开始和结束时都能够监听到animationstart，animationend</p>
<h4 id="阻止冒泡问题"><a href="#阻止冒泡问题" class="headerlink" title="阻止冒泡问题"></a>阻止冒泡问题</h4><p><code>stopPropagation()</code>方法既可以阻止事件冒泡，也可以阻止事件捕获</p>
<p><code>stopImmediatePropagation()</code>和 <code>stopPropagation()</code>的区别在，后者只会阻止冒泡或者是捕获。 但是前者除此之外还会阻止该元素的其他事件发生，但是后者就不会阻止其他事件的发生</p>
<h4 id="arguments的问题"><a href="#arguments的问题" class="headerlink" title="arguments的问题"></a>arguments的问题</h4><p><code>arguments</code>不是一个真正的数组，是一个类数组，无法使用<code>shift</code>等数组方法，只能使用<code>Array.prototype.slice.apply(arguments)</code>转换成真正的数组，或者使用<code>[].shift.call(arguments)</code>之类的方法来调用数组的方法</p>
<h4 id="img作为数据统计的问题"><a href="#img作为数据统计的问题" class="headerlink" title="img作为数据统计的问题"></a>img作为数据统计的问题</h4><p>img经常进行用于数据上报，做用户埋点什么的，消息已读什么的，就是将query放在图片的请求地址上就可以了。需要注意在使用img进行http请求时，img对象需要存储在闭包里，避免函数执行后，里面的变量在http请求完成前被销毁，导致发送不成功，会造成请求丢失的问题<br>例子（使用闭包封装img变量，避免销毁）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tracker = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> imgs = [];</span><br><span class="line">    <span class="keyword">var</span> url = <span class="string">&#x27;https://www.baidu.com/img/bd_logo1.png&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">id, obj = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> query = <span class="string">&#x27;?id=&#x27;</span> + id;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            query += <span class="string">&#x27;&amp;&#x27;</span> + i + <span class="string">&#x27;=&#x27;</span> + obj[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">        imgs.<span class="title function_">push</span>(img);</span><br><span class="line">        img.<span class="property">src</span> = url + query;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="title function_">tracker</span>(<span class="string">&#x27;TEST_TRACKER&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;yuuhei&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;24&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h4 id="js数组的push实际是进行复制"><a href="#js数组的push实际是进行复制" class="headerlink" title="js数组的push实际是进行复制"></a>js数组的push实际是进行复制</h4><p>下面类似v8的实现源码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">arrayPush</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> _length = <span class="variable language_">this</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="variable language_">arguments</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="variable language_">this</span>[_length + i] = <span class="variable language_">arguments</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">length</span> = _length + n;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="arguments-callee就是执行函数本身，常用是递归"><a href="#arguments-callee就是执行函数本身，常用是递归" class="headerlink" title="arguments.callee就是执行函数本身，常用是递归"></a>arguments.callee就是执行函数本身，常用是递归</h4><h4 id="flex布局左右分配规则"><a href="#flex布局左右分配规则" class="headerlink" title="flex布局左右分配规则"></a>flex布局左右分配规则</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>左边有预留位置，有空位补充<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>右边没预留位置，文字多长容器就多长<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.test &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.test .left &#123;</span><br><span class="line">    flex: 1 1 auto;</span><br><span class="line">&#125;</span><br><span class="line">.test .right &#123;</span><br><span class="line">    flex: 0 0 auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto</p>
<ul>
<li>flex-grow属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。</li>
<li>flex-shrink属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</li>
<li>flex-basis属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小，占据固定空间。</li>
</ul>
<h4 id="script也有onload"><a href="#script也有onload" class="headerlink" title="script也有onload"></a>script也有onload</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">script.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, fn; fn = cache[i++];) &#123;</span><br><span class="line">        <span class="title function_">fn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">script.<span class="property">src</span> = <span class="string">&#x27;./miniConsole.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(script);</span><br></pre></td></tr></table></figure>

<h4 id="img懒加载完美版"><a href="#img懒加载完美版" class="headerlink" title="img懒加载完美版"></a>img懒加载完美版</h4><p>js实现图片加载前显示loading，先设置一个自定义属性，然后img的src先指向loading的位置，然后每个img依次使用<code>new Image()</code>，预加载好自定义属性里的图片地址，待预加载好了的时候，使用onload将img的地址指向真正的src</p>
<p>实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./loading.gif&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;https://www.baidu.com/img/bd_logo1.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazy-image&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./loading.gif&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;https://www.baidu.com/img/bd_logo1.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;lazy-image&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 节流函数</span></span><br><span class="line"><span class="keyword">var</span> throttle = <span class="keyword">function</span>(<span class="params">fn, interval</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> timer,</span><br><span class="line">        firstTime = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (firstTime) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(_this, <span class="variable language_">arguments</span>);</span><br><span class="line">            firstTime = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            timer = <span class="literal">null</span>;</span><br><span class="line">            fn.<span class="title function_">apply</span>(_this, <span class="variable language_">arguments</span>);</span><br><span class="line">        &#125;, interval || <span class="number">200</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 先添加缓存，然后再赋值</span></span><br><span class="line"><span class="keyword">var</span> lazyImage = <span class="keyword">function</span>(<span class="params">imageItem</span>) &#123;</span><br><span class="line">    <span class="comment">// .style.cssText会将元素的行内元素整个覆盖</span></span><br><span class="line">    imageItem.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;transition: &#x27;&#x27;; opacity: 0;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">    <span class="keyword">var</span> realSrc = imageItem.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">    img.<span class="property">src</span> = realSrc;</span><br><span class="line">    img.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        imageItem.<span class="property">src</span> = realSrc;</span><br><span class="line">        imageItem.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;transition:all 1s; opacity: 1;&quot;</span>;</span><br><span class="line">        imageItem.<span class="property">onLoad</span> = <span class="literal">true</span>;</span><br><span class="line">        imageItem.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> renderImage = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> imageList = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;lazy-image&#x27;</span>);</span><br><span class="line">    <span class="comment">// 无序加载（图片加载完的时间不是有序）</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, imageItem; imageItem = imageList[i++];) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> + <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> &gt; imageItem.<span class="property">offsetTop</span> &amp;&amp; !imageItem.<span class="property">onLoad</span>) &#123;</span><br><span class="line">            <span class="title function_">lazyImage</span>(imageItem);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, renderImage, <span class="literal">false</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="title function_">throttle</span>(renderImage, <span class="number">300</span>), <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<p>倒序遍历：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> l = arr.<span class="property">length</span> - <span class="number">1</span>; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于es6中的WeakSet和WeakMap："><a href="#关于es6中的WeakSet和WeakMap：" class="headerlink" title="关于es6中的WeakSet和WeakMap："></a>关于es6中的WeakSet和WeakMap：</h4><p>（Weak都是为了对象解决引用内存的问题）</p>
<ul>
<li>WeakMap 只能用Object作为key，不能用基本数据类型比如字符串作为key</li>
<li>WeakMap 中的key是弱引用</li>
<li>WeakMap 没有size</li>
<li>WeakMap 不支持遍历</li>
</ul>
<p>没有size和不支持遍历的原因是，由于Weak内部有多少个成员，取决于垃圾回收机制有没有运行，运行前后很可能成员个数是不一样的，而垃圾回收机制何时运行是不可预测的，因此ES6规定Weak不可遍历</p>
<p>Map 的一个最大弊端就是它会导致作为key的对象增加一个引用，因此导致GC无法回收这个对象，如果大量使用object作为Map的key会导致大量的内存泄露</p>
<p>WeakMap就是为了解决这个问题，在WeakMap中对作为key的对象是一个弱引用，也就是说，GC在计算对象引用数量的时候并不会把弱引用计算进去。这样当一个对象除了WeakMap没有其他引用的时候就会被GC</p>
<h4 id="自定义事件的创造和触发（version-ie9）"><a href="#自定义事件的创造和触发（version-ie9）" class="headerlink" title="自定义事件的创造和触发（version &gt;&#x3D; ie9）"></a>自定义事件的创造和触发（version &gt;&#x3D; ie9）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立自定义事件创造函数</span></span><br><span class="line"><span class="keyword">var</span> createEvent = <span class="keyword">function</span> <span class="title function_">createEvent</span> (name) &#123;</span><br><span class="line">    <span class="comment">// new CustomEvent可以自定义event对象返回时的属性</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Event</span>(name, &#123; <span class="attr">bubbles</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// IE does not support `new Event()`</span></span><br><span class="line">    createEvent = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> evt = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&#x27;Event&#x27;</span>);</span><br><span class="line">        evt.<span class="title function_">initEvent</span>(name, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span> evt;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅</span></span><br><span class="line">el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;customEvent&#x27;</span>, fn, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发</span></span><br><span class="line"><span class="keyword">var</span> customEvent = <span class="title function_">createEvent</span>(<span class="string">&#x27;customEvent&#x27;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    el.<span class="title function_">dispatchEvent</span>(customEvent);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="comment">// Firefox will throw an error on dispatchEvent for a detached element</span></span><br><span class="line">    <span class="comment">// https://bugzilla.mozilla.org/show_bug.cgi?id=889376</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，手动触发事件更好的做法是 IE 下用 fireEvent，标准浏览器下用 dispatchEvent 实现</p>
<h4 id="可以使用array-length-0来清空一个数组"><a href="#可以使用array-length-0来清空一个数组" class="headerlink" title="可以使用array.length &#x3D; 0来清空一个数组"></a>可以使用array.length &#x3D; 0来清空一个数组</h4><h4 id="客户端的cookies和服务端的session"><a href="#客户端的cookies和服务端的session" class="headerlink" title="客户端的cookies和服务端的session"></a>客户端的cookies和服务端的session</h4><p>http是一种无状态的协议，就是收到一个请求，就返回一个响应，而不关心请求者的身份。cookie就是在用户端保存请求信息的机制，每次请求的时候请求头都会携带cookie</p>
<p>cookie是一个分号分隔的多个key-value的字段，它也存在于本地的加密文件里，但只有浏览器能够操作它，本地打开是加密后文件</p>
<p>cookie有几个字段：</p>
<ul>
<li>name：代表cookie的名称</li>
<li>domain：cookie生效的域名，有作用域概念的，比如说二级域名能够使用一级域名的cookie，但不能使用其他二级域名，也不能操作所处的三级域名的cookie</li>
<li>path：cookie的生效路径，同一域名下又不同路径的cookie，也是无法操作的</li>
<li>expires：cookie的过期时间，如果不设置这个字段的话，就会在浏览器关闭的时候这个cookie就会被删除。expires的值是标准的日期格式，一般使用new Date().toUTCString()的值</li>
<li>HttpOnly：由服务端进行设定，并且用户端无法更改这个cookie，防止XSS恶意修改cookie，HttpOnly并不能绝对防止XSS</li>
<li>删除对应的cookie只有将某条cookie（其他字段一样）的过期时间改成已经过去的时间，即可删除</li>
</ul>
<p>session机制：</p>
<ul>
<li>session是服务端保存请求信息的机制，记录请求者身份</li>
<li>一般由服务端接到请求后，由服务端生成一个sessionID，然后将这个id写进请求用户端的cookie里，并且设定HttpOnly，这样每次客户端请求的时候，携带sessionID来请求，就能识别用户身份</li>
<li>生成的sessionID并不一定要种在cookie里，也可以放在请求参数里，或者在http的请求头里开辟一个token字段</li>
<li>一般都是在Response的Raw里Set-Cookie可以查看到服务端往客户端写cookie的操作</li>
</ul>
<p>标准写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&#x27;name=yuuhei;domain=baidu.com;path=/;expires=Mon, 26 Nov 2018 12:11:10 GMT&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="关于使用async-await进行请求的使用方法"><a href="#关于使用async-await进行请求的使用方法" class="headerlink" title="关于使用async&#x2F;await进行请求的使用方法"></a>关于使用async&#x2F;await进行请求的使用方法</h4><p>使用了async的函数一般默认返回都是返回一个Promise对象</p>
<p>async&#x2F;await会由于写法的不同产生的请求时机也会不一样，如以下代码：</p>
<p>首先定义一个模拟的请求函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟promise请求</span></span><br><span class="line"><span class="keyword">const</span> promiseRequest = <span class="keyword">function</span>(<span class="params">success, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (success) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> success === <span class="string">&#x27;boolean&#x27;</span>) &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(<span class="string">&#x27;promise success&#x27;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">resolve</span>(success);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="string">&#x27;promise error&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接着写执行函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mainStep = <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 都是同步代码，p3是在6秒后才打印出来</span></span><br><span class="line">    <span class="keyword">let</span> p1 = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">let</span> p3 = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mainStep</span>();</span><br></pre></td></tr></table></figure>

<p>注意以上代码，他们只会p1请求完毕只会，才会再请求p2，p2请求完毕后才会请求p3，这是一个同步的代码，并不是并行的代码，如果需要并行则需要改成以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mainAll = <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 这样写的p1和p2是并行的，首先都进行请求，然后再进行await，所用时间是2s+3s</span></span><br><span class="line">    <span class="keyword">let</span> p1 = <span class="title function_">promiseRequest</span>(<span class="string">&#x27;p1 await&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="title function_">promiseRequest</span>(<span class="string">&#x27;p2 await&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 并行开始，并且两者都完成了才会继续执行p3</span></span><br><span class="line">    <span class="keyword">let</span> r1 = <span class="keyword">await</span> p1;</span><br><span class="line">    <span class="keyword">let</span> r2 = <span class="keyword">await</span> p2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> p3 = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="string">`<span class="subst">$&#123;r1&#125;</span> and <span class="subst">$&#123;r2&#125;</span>`</span>, <span class="number">3000</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mainAll</span>();</span><br></pre></td></tr></table></figure>

<p>当然也可以使用PromiseAll处理并发，换个方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mainPromiseAll = <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> p1 = <span class="title function_">promiseRequest</span>(<span class="string">&#x27;p1 promiseAll await&#x27;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="title function_">promiseRequest</span>(<span class="string">&#x27;p2 promiseAll await &#x27;</span>, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> results = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> [r1, r2] = results;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> p3 = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="string">`<span class="subst">$&#123;r1&#125;</span> and <span class="subst">$&#123;r2&#125;</span>`</span>, <span class="number">3000</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mainPromiseAll</span>();</span><br></pre></td></tr></table></figure>

<p>async&#x2F;await同样可以使用Promise.all进行错误捕获：</p>
<blockquote>
<p>await的Promise.all的错误捕获之一，统一在Promise.all中的catch捕获</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">doRequest1</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="literal">false</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doRequest2</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="string">&#x27;await try-catch-2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// doRequest1报错后接下来的请求都不会再执行，错误提示只提一遍</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">doRequest1</span>(), <span class="title function_">doRequest2</span>()]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>await的Promise.all的错误捕获之二，分别在里面的Promise都进行try-catch处理，Promise.all里的catch就不会再执行</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">doRequest1</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="literal">false</span>, <span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">doRequest2</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">promiseRequest</span>(<span class="string">&#x27;await try-catch-2&#x27;</span>, <span class="number">2000</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// doRequest1报错后接下来的请求也会继续执行，有多少个错误就报多少个错，只要里面每个Promise都进行了错误捕获，然后只会执行then，永远不会执行catch，因为已经捕获过了</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="title function_">doRequest1</span>(), <span class="title function_">doRequest2</span>()]).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;do not run here forever&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>不使用Promise.all也可以达到效果的同步代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">doRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> p1 = <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> p2 = <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">let</span> p3 = <span class="title function_">promiseRequest</span>(<span class="literal">true</span>, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> p1;</span><br><span class="line">        <span class="keyword">await</span> p2;</span><br><span class="line">        <span class="keyword">await</span> p3;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;next&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        client.<span class="title function_">alert</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">doRequest</span>()</span><br></pre></td></tr></table></figure>

<p>以上代码p1、p2和p3并行完成后才会继续走next后的代码</p>
<h4 id="在请求头使用Token"><a href="#在请求头使用Token" class="headerlink" title="在请求头使用Token"></a>在请求头使用Token</h4><p>在使用JSON Web Token作为单点登录的验证媒介时，为保证安全性，建议将JWT的信息存放在HTTP的请求头中，并使用https对请求链接进行加密传输</p>
<p>当在进行跨域请求的时候，如自定义请求头，如添加token字段，属于复杂请求，那么HTTP请求会发出一个预检请求，即OPTIONS请求，访问服务器是否允许该请求，如果没有进行设置，服务器会返回403 Forbidden，需要在服务端也要定义好自定义的请求头字段，才能响应响应预检请求，ajax工具可以在beforeSend进行对xhr.setRequestHeader进行设置请求头</p>
<h4 id="数组的indexOf也可以用来判断对象的位置，传入对象引用的内存地址就能够找到"><a href="#数组的indexOf也可以用来判断对象的位置，传入对象引用的内存地址就能够找到" class="headerlink" title="数组的indexOf也可以用来判断对象的位置，传入对象引用的内存地址就能够找到"></a>数组的indexOf也可以用来判断对象的位置，传入对象引用的内存地址就能够找到</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;<span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = [obj1, obj2];</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">indexOf</span>(obj2); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h4 id="String类型也可以使用slice，用法与Array差不多"><a href="#String类型也可以使用slice，用法与Array差不多" class="headerlink" title="String类型也可以使用slice，用法与Array差不多"></a>String类型也可以使用slice，用法与Array差不多</h4><h4 id="JS标准快排原理"><a href="#JS标准快排原理" class="headerlink" title="JS标准快排原理"></a>JS标准快排原理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">quickSort</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">quick</span>(array, <span class="number">0</span>, array.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">quick</span>(<span class="params">array, left, right</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> index;</span><br><span class="line">    <span class="keyword">if</span> (array.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        index = <span class="title function_">partition</span>(array, left, right);</span><br><span class="line">        <span class="keyword">if</span> (left &lt; index - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="title function_">quick</span>(array, left, index - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; right) &#123;</span><br><span class="line">            <span class="title function_">quick</span>(array, index, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 划分操作函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">partition</span>(<span class="params">array, left, right</span>) &#123;</span><br><span class="line">    <span class="comment">// 用index取中间值而非splice</span></span><br><span class="line">    <span class="keyword">const</span> pivot = array[<span class="title class_">Math</span>.<span class="title function_">floor</span>((right + left) / <span class="number">2</span>)];</span><br><span class="line">    <span class="keyword">let</span> i = left;</span><br><span class="line">    <span class="keyword">let</span> j = right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="title function_">compare</span>(array[i], pivot) === -<span class="number">1</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (<span class="title function_">compare</span>(array[j], pivot) === <span class="number">1</span>) &#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= j) &#123;</span><br><span class="line">            <span class="title function_">swap</span>(array, i, j);</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">compare</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a === b) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a &lt; b ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原地交换函数，而非用临时数组</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">swap</span>(<span class="params">array, a, b</span>) &#123;;</span><br><span class="line">    [array[a], array[b]] = [array[b], array[a]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">阮一峰老师的快排会增加空间复杂度，尽量使用这种教科书式的原理，且v8的sort底层本身就经过优化，比现在大多数排序的优化都好，尽量使用sort。</span><br><span class="line"></span><br><span class="line">#### 金钱千分符格式化正则</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span></span><br><span class="line"><span class="string">function exchange(num) &#123;</span></span><br><span class="line"><span class="string">    num = String(num);</span></span><br><span class="line"><span class="string">    if (num.length &lt; 4) &#123;</span></span><br><span class="line"><span class="string">        return num;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    num = num.replace(/\d&#123;1,3&#125;(?=(\d&#123;3&#125;)+$)/g, (v) =&gt; &#123;</span></span><br><span class="line"><span class="string">        return v + &#x27;,&#x27;;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return num;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### JS深复制原理实现</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 判断类型</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断数据类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">All</span>&#125; obj    需要判断的对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">String</span>&#125;     返回结果字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">typeOf</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line">    <span class="keyword">const</span> map = &#123;</span><br><span class="line">        <span class="string">&quot;[object Boolean]&quot;</span>: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Number]&quot;</span>: <span class="string">&quot;number&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object String]&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Function]&quot;</span>: <span class="string">&quot;function&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Array]&quot;</span>: <span class="string">&quot;array&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Date]&quot;</span>: <span class="string">&quot;date&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object RegExp]&quot;</span>: <span class="string">&quot;regExp&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Undefined]&quot;</span>: <span class="string">&quot;undefined&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Null]&quot;</span>: <span class="string">&quot;null&quot;</span>,</span><br><span class="line">        <span class="string">&quot;[object Object]&quot;</span>: <span class="string">&quot;object&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> map[toString.<span class="title function_">call</span>(obj)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>递归赋值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 深复制</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">Array/Object</span>&#125; data 需要复制的数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array/Object</span>&#125;      返回新的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> type = <span class="title function_">typeOf</span>(data);</span><br><span class="line">    <span class="keyword">let</span> ret;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只有array和object需要递归遍历</span></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&quot;array&quot;</span>) &#123;</span><br><span class="line">        ret = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        ret = &#123;&#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&quot;array&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            ret.<span class="title function_">push</span>(<span class="title function_">deepCopy</span>(data[i]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">            ret[key] = <span class="title function_">deepCopy</span>(data[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="iOS下调用元素的focus方法，input元素不聚焦问题"><a href="#iOS下调用元素的focus方法，input元素不聚焦问题" class="headerlink" title="iOS下调用元素的focus方法，input元素不聚焦问题"></a>iOS下调用元素的focus方法，input元素不聚焦问题</h4><p>注意，在iOS有一个兼容问题，就是如果在钩子函数里调用$el.focus()，或异步调用$el.focus()的话，是不成功的。</p>
<p>google有以下解释：</p>
<blockquote>
<p>iOS将只允许在其他元素上绑定函数来触发focus事件，如果第一个函数调用栈是由非编程触发的事件，调用setTimeout开始一个新的调用堆栈，IOS的安全机制开始阻止你触发input元素的focus事件。在函数里使用异步也是不行的</p>
</blockquote>
<p>钩子函数无法触发例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码应该很多人会这么做，需求背景时：点击某个元素，弹框出现，然后自动聚焦在弹框的input上</p>
<p>异步函数无法触发例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">visable</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 视图更新后，必须在nextTick回调做事，不然不生效</span></span><br><span class="line">        <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">component</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>既然钩子函数无法触发，那就使用点击事件，其中visable对应v-show和v-if都是一样的，然后在异步调用focus</p>
<p>以上两个例子在真机上，安卓是可以的，iOS是失效的。</p>
<p>那怎么办，暂时找到的唯一方法：使input元素一直存在于页面中，只是对用户不可见而已（位移移出可视区域），然后调用focus，iOS才能生效</p>
<p><strong>成功例子</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 必须通过事件触发，click, touchend等</span></span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 将子组件移动到可视区域</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">component</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在iOS中，所有异步调用setTimeout，Promise，nextTick等，调用focus()均无效</p>
<h4 id="超长String转Number后会有问题"><a href="#超长String转Number后会有问题" class="headerlink" title="超长String转Number后会有问题"></a>超长String转Number后会有问题</h4><p>注意：Number类型超过16位的数字会变成0，且第16位会加一</p>
<p>在对String进行转换为Number时需要注意长度问题</p>
<h4 id="使用递归格式化用于级联列表的格式"><a href="#使用递归格式化用于级联列表的格式" class="headerlink" title="使用递归格式化用于级联列表的格式"></a>使用递归格式化用于级联列表的格式</h4><p>从后台返回的树状列表结构，一般是这种形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="comment">// 从公司开始，所以这个列表只有一个对象，从部门开始才是多个对象</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="string">&quot;0000&quot;</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;公司名称&quot;</span>,</span><br><span class="line">        <span class="string">&quot;level&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;parentId&quot;</span>: <span class="string">&quot;null&quot;</span>,</span><br><span class="line">        <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1000&quot;</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;信息技术中心&quot;</span>,</span><br><span class="line">                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">                <span class="string">&quot;parentId&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">                <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">&quot;id&quot;</span>: <span class="string">&quot;10001&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;系统开发部&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;level&quot;</span>: <span class="string">&quot;1000&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;parentId&quot;</span>: <span class="string">&quot;68610408&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1000101&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;后端开发组&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;parentId&quot;</span>: <span class="string">&quot;10001&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;children&quot;</span>: []</span><br><span class="line">                            &#125;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="string">&quot;id&quot;</span>: <span class="string">&quot;1000102&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;前端开发组&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;level&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;parentId&quot;</span>: <span class="string">&quot;10001&quot;</span>,</span><br><span class="line">                                <span class="string">&quot;children&quot;</span>: []</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// ...其他部门</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>而级联组件一般的格式就是如此，但由于后端返回来的字段各种各样，前端也需要进行一个数据的格式化，需要将格式变为以下如此：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: <span class="string">&quot;zhinan&quot;</span>,</span><br><span class="line">    <span class="string">&quot;label&quot;</span>: <span class="string">&quot;指南&quot;</span>,</span><br><span class="line">    <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: <span class="string">&quot;shejiyuanze&quot;</span>,</span><br><span class="line">        <span class="string">&quot;label&quot;</span>: <span class="string">&quot;设计原则&quot;</span>,</span><br><span class="line">        <span class="string">&quot;children&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;value&quot;</span>: <span class="string">&quot;yizhi&quot;</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="string">&quot;一致&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;value&quot;</span>: <span class="string">&quot;fankui&quot;</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="string">&quot;反馈&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;value&quot;</span>: <span class="string">&quot;xiaolv&quot;</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="string">&quot;效率&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;value&quot;</span>: <span class="string">&quot;kekong&quot;</span>,</span><br><span class="line">            <span class="string">&quot;label&quot;</span>: <span class="string">&quot;可控&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>可以发现，这类数据都有着重复的规律，这种就可以使用递归进行遍历：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归处理树状结构</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatList</span>(<span class="params">list</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> ret = [];</span><br><span class="line"></span><br><span class="line">    list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line">        obj.<span class="property">label</span> = item.<span class="property">name</span>;</span><br><span class="line">        obj.<span class="property">value</span> = item.<span class="property">id</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> item) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(item[key]) &amp;&amp; item[key].<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// children与第一层结构一样，可以递归</span></span><br><span class="line">                obj.<span class="property">children</span> = <span class="title function_">formatList</span>(item[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ret.<span class="title function_">push</span>(obj);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于document-write的问题"><a href="#关于document-write的问题" class="headerlink" title="关于document.write的问题"></a>关于document.write的问题</h4><p>document.write写入的内容是叠加的，不是覆盖写入，可以做一些如下操作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/reset.css&quot;&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>可以动态加载注入外部的css文件</p>
<h4 id="前端生成的base64图片或文件如何下载"><a href="#前端生成的base64图片或文件如何下载" class="headerlink" title="前端生成的base64图片或文件如何下载"></a>前端生成的base64图片或文件如何下载</h4><p>前端下载的原理是通过在a标签上定义href和download属性，download在同源里可以设置下载的文件名，然后通过自定义时间触发a标签的点击，就可以进行下载了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// data可以为base64，或后端的文件地址</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">saveFile</span>(<span class="params">data, filename = <span class="string">&#x27;&#x27;</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> save_link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">    save_link.<span class="property">href</span> = data;</span><br><span class="line">    save_link.<span class="property">download</span> = filename; <span class="comment">// 同域下才能指定download，否则又后端控制</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义派发时间，相当于点击a标签</span></span><br><span class="line">    <span class="keyword">let</span> event = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&#x27;MouseEvents&#x27;</span>);</span><br><span class="line">    event.<span class="title function_">initMouseEvent</span>(<span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="variable language_">window</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span>);</span><br><span class="line">    save_link.<span class="title function_">dispatchEvent</span>(event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="前端生成pdf并下载"><a href="#前端生成pdf并下载" class="headerlink" title="前端生成pdf并下载"></a>前端生成pdf并下载</h4><p>可以通过html2canvas和jsPDF配合生成下载，具体教程可以网上搜</p>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JS/" rel="tag"># JS</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/20/JS%E5%B7%A5%E4%BD%9C%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93%EF%BC%881%EF%BC%89/" rel="next" title="JS工作经验总结（1）">
                <i class="fa fa-chevron-left"></i> JS工作经验总结（1）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/01/JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AC%94%E8%AE%B0/" rel="prev" title="JavaScript高级程序设计笔记">
                JavaScript高级程序设计笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://puu.sh/uoJbK/033c9ae781.jpg"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">56</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Sellenite" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#new-Array-%E7%9A%84%E9%81%8D%E5%8E%86%E9%97%AE%E9%A2%98"><span class="nav-number">1.</span> <span class="nav-text">new Array()的遍历问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webkitTransitionEnd%E7%9B%91%E5%90%ACTransition%E5%8A%A8%E7%94%BB%E7%BB%93%E6%9D%9F%E4%BA%8B%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">webkitTransitionEnd监听Transition动画结束事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1%E9%97%AE%E9%A2%98"><span class="nav-number">3.</span> <span class="nav-text">阻止冒泡问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#arguments%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.</span> <span class="nav-text">arguments的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#img%E4%BD%9C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">5.</span> <span class="nav-text">img作为数据统计的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#js%E6%95%B0%E7%BB%84%E7%9A%84push%E5%AE%9E%E9%99%85%E6%98%AF%E8%BF%9B%E8%A1%8C%E5%A4%8D%E5%88%B6"><span class="nav-number">6.</span> <span class="nav-text">js数组的push实际是进行复制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#arguments-callee%E5%B0%B1%E6%98%AF%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%E6%9C%AC%E8%BA%AB%EF%BC%8C%E5%B8%B8%E7%94%A8%E6%98%AF%E9%80%92%E5%BD%92"><span class="nav-number">7.</span> <span class="nav-text">arguments.callee就是执行函数本身，常用是递归</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flex%E5%B8%83%E5%B1%80%E5%B7%A6%E5%8F%B3%E5%88%86%E9%85%8D%E8%A7%84%E5%88%99"><span class="nav-number">8.</span> <span class="nav-text">flex布局左右分配规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#script%E4%B9%9F%E6%9C%89onload"><span class="nav-number">9.</span> <span class="nav-text">script也有onload</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#img%E6%87%92%E5%8A%A0%E8%BD%BD%E5%AE%8C%E7%BE%8E%E7%89%88"><span class="nav-number">10.</span> <span class="nav-text">img懒加载完美版</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8Ees6%E4%B8%AD%E7%9A%84WeakSet%E5%92%8CWeakMap%EF%BC%9A"><span class="nav-number">11.</span> <span class="nav-text">关于es6中的WeakSet和WeakMap：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%88%9B%E9%80%A0%E5%92%8C%E8%A7%A6%E5%8F%91%EF%BC%88version-ie9%EF%BC%89"><span class="nav-number">12.</span> <span class="nav-text">自定义事件的创造和触发（version &gt;&#x3D; ie9）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8array-length-0%E6%9D%A5%E6%B8%85%E7%A9%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84"><span class="nav-number">13.</span> <span class="nav-text">可以使用array.length &#x3D; 0来清空一个数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%9A%84cookies%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84session"><span class="nav-number">14.</span> <span class="nav-text">客户端的cookies和服务端的session</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E4%BD%BF%E7%94%A8async-await%E8%BF%9B%E8%A1%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">15.</span> <span class="nav-text">关于使用async&#x2F;await进行请求的使用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BD%BF%E7%94%A8Token"><span class="nav-number">16.</span> <span class="nav-text">在请求头使用Token</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84indexOf%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8C%E4%BC%A0%E5%85%A5%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E7%9A%84%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E5%B0%B1%E8%83%BD%E5%A4%9F%E6%89%BE%E5%88%B0"><span class="nav-number">17.</span> <span class="nav-text">数组的indexOf也可以用来判断对象的位置，传入对象引用的内存地址就能够找到</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#String%E7%B1%BB%E5%9E%8B%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8slice%EF%BC%8C%E7%94%A8%E6%B3%95%E4%B8%8EArray%E5%B7%AE%E4%B8%8D%E5%A4%9A"><span class="nav-number">18.</span> <span class="nav-text">String类型也可以使用slice，用法与Array差不多</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JS%E6%A0%87%E5%87%86%E5%BF%AB%E6%8E%92%E5%8E%9F%E7%90%86"><span class="nav-number">19.</span> <span class="nav-text">JS标准快排原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iOS%E4%B8%8B%E8%B0%83%E7%94%A8%E5%85%83%E7%B4%A0%E7%9A%84focus%E6%96%B9%E6%B3%95%EF%BC%8Cinput%E5%85%83%E7%B4%A0%E4%B8%8D%E8%81%9A%E7%84%A6%E9%97%AE%E9%A2%98"><span class="nav-number">20.</span> <span class="nav-text">iOS下调用元素的focus方法，input元素不聚焦问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B6%85%E9%95%BFString%E8%BD%ACNumber%E5%90%8E%E4%BC%9A%E6%9C%89%E9%97%AE%E9%A2%98"><span class="nav-number">21.</span> <span class="nav-text">超长String转Number后会有问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%94%A8%E4%BA%8E%E7%BA%A7%E8%81%94%E5%88%97%E8%A1%A8%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="nav-number">22.</span> <span class="nav-text">使用递归格式化用于级联列表的格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8Edocument-write%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">23.</span> <span class="nav-text">关于document.write的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%94%9F%E6%88%90%E7%9A%84base64%E5%9B%BE%E7%89%87%E6%88%96%E6%96%87%E4%BB%B6%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD"><span class="nav-number">24.</span> <span class="nav-text">前端生成的base64图片或文件如何下载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%94%9F%E6%88%90pdf%E5%B9%B6%E4%B8%8B%E8%BD%BD"><span class="nav-number">25.</span> <span class="nav-text">前端生成pdf并下载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">26.</span> <span class="nav-text"></span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sellenite</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "8a77bfe2a58a49a7934da4f4ff1ca715",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  





  

  

  

  

</body>
</html>
